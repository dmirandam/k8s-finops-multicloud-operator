apiVersion: v1
kind: Service
metadata:
  name: web
  namespace: demo
spec:
  selector: { app: web }
  ports: [{ port: 80, targetPort: 80 }]
---
apiVersion: networking.karmada.io/v1alpha1
kind: ServiceExport
metadata:
  name: web
  namespace: demo
---
apiVersion: apps.karmada.io/v1alpha1
kind: ClusterPropagationPolicy
metadata:
  name: svc-export-prop
spec:
  resourceSelectors:
  - apiVersion: v1
    kind: Service
    name: web
    namespace: demo
  - apiVersion: networking.karmada.io/v1alpha1
    kind: ServiceExport
    name: web
    namespace: demo
  placement:
    clusterAffinity:
      clusterNames: ["microk8s-cluster-1","microk8s-cluster-2"]
